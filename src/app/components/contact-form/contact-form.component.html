<div class="contact-form-container">
  <div class="form-header">
    <h3>{{ translationService.getTranslation("contact.form.title") }}</h3>
    <p>{{ translationService.getTranslation("contact.hero.subtitle") }}</p>
  </div>

  <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" class="contact-form">
    <!-- Form Error Summary -->
    <div class="form-error-summary" *ngIf="hasFormErrors()">
      <i class="fas fa-exclamation-triangle"></i>
      <span>{{ translationService.getTranslation("common.error") }}</span>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="fullName">
          {{ translationService.getTranslation("contact.form.full_name") }}
          <span class="required-indicator" *ngIf="isFieldRequired('fullName')"
            >*</span
          >
        </label>
        <input
          type="text"
          id="fullName"
          formControlName="fullName"
          [class.invalid]="isFieldInvalid('fullName')"
          [class.valid]="
            !isFieldInvalid('fullName') && getFieldValue('fullName')
          "
          [placeholder]="
            translationService.getTranslation(
              'contact.form.full_name_placeholder'
            )
          "
          autocomplete="name"
        />
        <div class="error-message" *ngIf="isFieldInvalid('fullName')">
          {{ getErrorMessage("fullName") }}
        </div>
        <div
          class="field-info"
          *ngIf="!isFieldInvalid('fullName') && getFieldValue('fullName')"
        >
          <i class="fas fa-check-circle"></i>
          <span>{{ translationService.getTranslation("common.success") }}</span>
        </div>
      </div>

      <div class="form-group">
        <label for="phoneNumber">
          {{ translationService.getTranslation("contact.form.phone") }}
          <span
            class="required-indicator"
            *ngIf="isFieldRequired('phoneNumber')"
            >*</span
          >
        </label>
        <input
          type="tel"
          id="phoneNumber"
          formControlName="phoneNumber"
          [class.invalid]="isFieldInvalid('phoneNumber')"
          [class.valid]="
            !isFieldInvalid('phoneNumber') && getFieldValue('phoneNumber')
          "
          [placeholder]="
            translationService.getTranslation('contact.form.phone_placeholder')
          "
          autocomplete="tel"
        />
        <div class="error-message" *ngIf="isFieldInvalid('phoneNumber')">
          {{ getErrorMessage("phoneNumber") }}
        </div>
        <div
          class="field-info"
          *ngIf="!isFieldInvalid('phoneNumber') && getFieldValue('phoneNumber')"
        >
          <i class="fas fa-check-circle"></i>
          <span>{{ translationService.getTranslation("common.success") }}</span>
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="carType">
          {{ translationService.getTranslation("contact.form.car_type") }}
          <span class="required-indicator" *ngIf="isFieldRequired('carType')"
            >*</span
          >
        </label>
        <select
          id="carType"
          formControlName="carType"
          [class.invalid]="isFieldInvalid('carType')"
          [class.valid]="!isFieldInvalid('carType') && getFieldValue('carType')"
        >
          <option value="">
            {{
              translationService.getTranslation(
                "contact.form.car_type_placeholder"
              )
            }}
          </option>
          <option value="sedan">
            {{ translationService.getTranslation("contact.car_types.sedan") }}
          </option>
          <option value="suv">
            {{ translationService.getTranslation("contact.car_types.suv") }}
          </option>
          <option value="hatchback">
            {{
              translationService.getTranslation("contact.car_types.hatchback")
            }}
          </option>
          <option value="coupe">
            {{ translationService.getTranslation("contact.car_types.coupe") }}
          </option>
          <option value="van">
            {{ translationService.getTranslation("contact.car_types.van") }}
          </option>
          <option value="truck">
            {{ translationService.getTranslation("contact.car_types.truck") }}
          </option>
          <option value="motorcycle">
            {{
              translationService.getTranslation("contact.car_types.motorcycle")
            }}
          </option>
          <option value="other">
            {{ translationService.getTranslation("contact.car_types.other") }}
          </option>
        </select>
        <div class="error-message" *ngIf="isFieldInvalid('carType')">
          {{ getErrorMessage("carType") }}
        </div>
        <div
          class="field-info"
          *ngIf="!isFieldInvalid('carType') && getFieldValue('carType')"
        >
          <i class="fas fa-check-circle"></i>
          <span>{{ translationService.getTranslation("common.success") }}</span>
        </div>
      </div>

      <div class="form-group">
        <label for="carModel">
          {{ translationService.getTranslation("contact.form.car_model") }}
          <span class="required-indicator" *ngIf="isFieldRequired('carModel')"
            >*</span
          >
        </label>
        <input
          type="text"
          id="carModel"
          formControlName="carModel"
          [class.invalid]="isFieldInvalid('carModel')"
          [class.valid]="
            !isFieldInvalid('carModel') && getFieldValue('carModel')
          "
          [placeholder]="
            translationService.getTranslation(
              'contact.form.car_model_placeholder'
            )
          "
          autocomplete="off"
        />
        <div class="error-message" *ngIf="isFieldInvalid('carModel')">
          {{ getErrorMessage("carModel") }}
        </div>
        <div
          class="field-info"
          *ngIf="!isFieldInvalid('carModel') && getFieldValue('carModel')"
        >
          <i class="fas fa-check-circle"></i>
          <span>{{ translationService.getTranslation("common.success") }}</span>
        </div>
      </div>
    </div>

    <div class="form-group full-width">
      <label for="notes">
        {{ translationService.getTranslation("contact.form.notes") }}
        <span class="optional-indicator"
          >({{ translationService.getTranslation("common.optional") }})</span
        >
      </label>
      <textarea
        id="notes"
        formControlName="notes"
        [class.invalid]="isFieldInvalid('notes')"
        [class.valid]="!isFieldInvalid('notes') && getFieldValue('notes')"
        rows="4"
        [placeholder]="
          translationService.getTranslation('contact.form.notes_placeholder')
        "
      ></textarea>
      <div class="error-message" *ngIf="isFieldInvalid('notes')">
        {{ getErrorMessage("notes") }}
      </div>
      <div
        class="field-info"
        *ngIf="!isFieldInvalid('notes') && getFieldValue('notes')"
      >
        <i class="fas fa-check-circle"></i>
        <span>{{ translationService.getTranslation("common.success") }}</span>
      </div>
      <div class="character-count" *ngIf="getFieldValue('notes')">
        <span [class.near-limit]="getFieldValue('notes').length > 400">
          {{ getFieldValue("notes").length }}/500
        </span>
      </div>
    </div>

    <div class="form-actions">
      <button
        type="submit"
        class="submit-btn"
        [disabled]="isSubmitting || contactForm.invalid"
      >
        <i class="fas fa-paper-plane"></i>
        <span *ngIf="!isSubmitting">{{
          translationService.getTranslation("contact.form.submit")
        }}</span>
        <span *ngIf="isSubmitting">{{
          translationService.getTranslation("common.loading")
        }}</span>
      </button>

      <button
        type="button"
        class="reset-btn"
        (click)="resetForm()"
        [disabled]="isSubmitting"
      >
        <i class="fas fa-redo"></i>
        <span>{{ translationService.getTranslation("common.reset") }}</span>
      </button>
    </div>

    <!-- Success Message -->
    <div class="message success" *ngIf="submitSuccess">
      <i class="fas fa-check-circle"></i>
      <span>{{
        translationService.getTranslation("contact.form.success_message")
      }}</span>
    </div>

    <!-- Error Message -->
    <div class="message error" *ngIf="submitError">
      <i class="fas fa-exclamation-circle"></i>
      <span>{{ submitError }}</span>
    </div>

    <!-- Form Status -->
    <div class="form-status" *ngIf="contactForm.touched">
      <div class="status-item">
        <i class="fas fa-info-circle"></i>
        <span>{{
          translationService.getTranslation("common.form_status")
        }}</span>
      </div>
    </div>
  </form>
</div>
